<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elegant Glassware</title>
    <link rel="stylesheet" href="style.css">
</head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<body>
    <div class="navbar">
        <div class="top">
            <div class="logo">
                <img src="assets/logo.png" alt=""><span>lassware</span>
            </div>
            <div class="icons">
                <i class="fa-solid fa-box-open"></i>
                <i id="search-icon" class="fa-solid fa-magnifying-glass" style="cursor:pointer;"></i>
                <input type="text" id="search-box" placeholder="Search products..." />
                <i id="user-icon" class="fa-regular fa-user user-icon"></i>

                <!-- User Info Dropdown (for logged-in user) -->
                <div id="user-dropdown" class="user-dropdown">
                    <p><strong>Username:</strong> <span id="user-name"></span></p>
                    <p><strong>Full Name:</strong> <span id="full-name"></span></p>
                    <button id="logout-btn">Logout</button>
                </div>

                <!-- Login Modal -->
                <div id="login-modal" class="modal" style="display:none;">
                    <form id="login-form">
                        <h2>Login</h2>
                        <input type="text" name="username" placeholder="Username" required />
                        <input type="password" name="password" placeholder="Password" required />
                        <button type="submit">Login</button>
                        <p>Don't have an account? <span id="show-signup">Sign up</span></p>
                    </form>
                </div>

                <!-- Signup Modal -->
                <div id="signup-modal" class="modal" style="display:none;">
                    <form id="signup-form">
                        <h2>Sign Up</h2>
                        <input type="text" name="username" placeholder="Username" required />
                        <input type="text" name="fullname" placeholder="Full Name" required />
                        <input type="email" name="email" placeholder="Email" required />
                        <input type="password" name="password" placeholder="Password" required />
                        <button type="submit">Sign Up</button>
                        <p>Already have an account? <span id="show-login">Login</span></p>
                    </form>
                </div>
                <script>
                    const userIcon = document.getElementById('user-icon');
                    const userDropdown = document.getElementById('user-dropdown');
                    const loginModal = document.getElementById('login-modal');
                    const signupModal = document.getElementById('signup-modal');
                    const showSignupLink = document.getElementById('show-signup');
                    const showLoginLink = document.getElementById('show-login');
                    const logoutBtn = document.getElementById('logout-btn');

                    userIcon.addEventListener('click', async (e) => {
                        e.stopPropagation();
                        // Check login state by calling backend API (user_data.php)
                        const res = await fetch('user_data.php');
                        const data = await res.json();

                        if (data.loggedIn) {
                            // Show user dropdown
                            document.getElementById('user-name').textContent = data.username;
                            document.getElementById('full-name').textContent = data.fullname;
                            userDropdown.style.display = userDropdown.style.display === 'block' ? 'none' : 'block';
                        } else {
                            // Show login modal
                            loginModal.style.display = 'block';
                        }
                    });

                    showSignupLink.addEventListener('click', () => {
                        loginModal.style.display = 'none';
                        signupModal.style.display = 'block';
                    });
                    
                    showLoginLink.addEventListener('click', () => {
                        signupModal.style.display = 'none';
                        loginModal.style.display = 'block';
                    });

                    logoutBtn.addEventListener('click', async () => {
                        await fetch('logout.php');
                        userDropdown.style.display = 'none';
                        alert('Logged out!');
                    });

                    document.addEventListener('click', () => {
                        userDropdown.style.display = 'none';
                        loginModal.style.display = 'none';
                        signupModal.style.display = 'none';
                    });
                </script>
                <i class="fa-solid fa-cart-shopping"></i><sup>10</sup>
            </div>
        </div>
        <nav class="nav">
            <a href="#"><i class="fa-solid fa-house"></i></a>
            <ul>
                <li class="has-dropdown" data-key="bestsellers"><a href="#home">Shop</a><svg
                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                        style="fill:none;stroke:currentColor;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round">
                        <path d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                    </svg>
                    <ul class="dropdown">
                        <li class="li"><strong>Shop (Short & Premium Version)</strong></li>
                        <li class="li">Tables (Dining, Coffee, Side)</li>
                        <li class="li">Chairs (Dining, Armchair, Stool)</li>
                        <li class="li">Sofas & Benches</li>
                        <li class="li">Storage (Cabinets, Bookshelves)</li>
                        <li class="li">Bedroom (Beds, Dressers)</li>
                        <li class="li">Custom Designs</li>
                    </ul>
                </li>
                <li class="has-dropdown" data-key="bestsellers"><a href="#sellers">Bestsellers</a><svg class="svg"
                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                        style="fill:none;stroke:currentColor;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round">
                        <path d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                    </svg>
                    <ul class="dropdown">
                        <li class="li"><strong>Bestseller (No Change, Short Already)</strong></li>
                        <li class="li">Sheesham Wood Dining Table – 6 Seater</li>
                        <li class="li">Modern Minimal Coffee Table</li>
                        <li class="li">Handcrafted Wooden Armchair</li>
                        <li class="li">Premium Sofa Set – 3+2 Seater</li>
                        <li class="li">Rustic Bookshelf</li>
                        <li class="li">Solid Wood King Bed</li>
                    </ul>
                </li>
                <li><a href="#build">Build Your Set</a></li>
                <li><a href="#look">Lookbook</a></li>
            </ul>
            <div class="toggle_btn">
                <i class="fa-solid fa-bars"></i>
            </div>
            <div class="line"></div>
        </nav>
        <div class="dropdown_menu">
            <li class="has-dropdown" data-key="bestsellers"><a href="#home">Shop</a><svg
                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                    style="fill:none;stroke:currentColor;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round">
                    <path d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                </svg>
                <ul class="dropdown">
                    <li class="li"><strong>Shop (Short & Premium Version)</strong></li>
                    <li class="li">Tables (Dining, Coffee, Side)</li>
                    <li class="li">Chairs (Dining, Armchair, Stool)</li>
                    <li class="li">Sofas & Benches</li>
                    <li class="li">Storage (Cabinets, Bookshelves)</li>
                    <li class="li">Bedroom (Beds, Dressers)</li>
                    <li class="li">Custom Designs</li>
                </ul>
            </li>
            <li class="has-dropdown" data-key="bestsellers"><a href="#sellers">Bestsellers</a><svg class="svg"
                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                    style="fill:none;stroke:currentColor;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round">
                    <path d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                </svg>
                <ul class="dropdown">
                    <li class="li"><strong>Bestseller (No Change, Short Already)</strong></li>
                    <li class="li">Sheesham Wood Dining Table – 6 Seater</li>
                    <li class="li">Modern Minimal Coffee Table</li>
                    <li class="li">Handcrafted Wooden Armchair</li>
                    <li class="li">Premium Sofa Set – 3+2 Seater</li>
                    <li class="li">Rustic Bookshelf</li>
                    <li class="li">Solid Wood King Bed</li>
                </ul>
            </li>
            <li><a href="#build">Build Your Set</a></li>
            <li><a href="#look">Lookbook</a></li>
        </div>
        <section id="home">
            <div class="home">
                <p>by &Tradition</p>
                <h1>Elegant Glassware</h1>
                <button>Show more</button>
            </div>
        </section>
    </div>
    <script src="script.js"></script>
</body>

</html>